<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<div class="justify-content-center text-center">
  <div class="col-xs-12 mx-auto">
    <form (ngSubmit)="onSubmit()">
      <div class="justify-content-center text-center">
        <div class="form-group col-xs-5">
          <label for="labelNameInput">Namn p√• config:</label>
          <input
            id="labelNameInput"
            type="text"
            [(ngModel)]="labelName"
            name="labelName"
            class="form-control"
          />
        </div>
      </div>
      <div class="row">
        <div class="form-group col-xs-5">
          <label for="inputTypeSelect">Typ:</label>
          <select
            id="inputTypeSelect"
            [(ngModel)]="inputType"
            name="inputType"
            class="form-control"
          >
            <option value="Text">Text</option>
            <option value="Number">Number</option>
            <option value="checkbox">Checkbox</option>
            <option value="Select">Select</option>
          </select>
        </div>
      </div>
      <div *ngIf="inputType === 'Select'">
        <input
          type="text"
          id="inputSelectOp1"
          [(ngModel)]="selectOption1"
          name="selectOption1"
          class="form-control"
        />
        <input
          type="text"
          id="inputSelectOp2"
          [(ngModel)]="selectOption2"
          name="selectOption2"
          class="form-control"
        />
        <input
          type="text"
          id="inputSelectOp3"
          [(ngModel)]="selectOption3"
          name="selectOption3"
          class="form-control"
        />
      </div>
      <button type="submit" class="btn btn-success">Add Input</button>
    </form>
  </div>
</div>
<hr />
<button (click)="onSaveSettings()" class="btn btn-success">Spara config</button>
<button (click)="onClearConfig()" class="btn btn-danger">Rensa lista</button>
<ul class="list-group justify-content-between col-md-12">
  <div class="container">
    <li *ngFor="let input of inputs; let i = index" class="list-group-item">
      <label class="mr-3">{{ input.labelName }}</label>
      <!-- 
        INPUT 
      -->
      <ng-container *ngIf="!input.editing">
        <ng-container *ngIf="input.inputType === 'Text'" class="col-sm">
          <input
            type="text"
            class="form-control col"
            [(ngModel)]="input.value"
          />
        </ng-container>
        <ng-container *ngIf="input.inputType === 'Number'" class="col-sm">
          <input type="number" class="form-control" [(ngModel)]="input.value" />
        </ng-container>
        <ng-container *ngIf="input.inputType === 'checkbox'" class="col-sm">
          <div class="form-check">
            <input
              type="checkbox"
              class="form-check-input"
              [(ngModel)]="input.value"
            />
            <label class="form-check-label"></label>
          </div>
        </ng-container>
        <ng-container *ngIf="input.inputType === 'Select'" class="col-sm">
          <select class="form-control" [(ngModel)]="input.value">
            <option>{{ input.selectOption1 }}</option>
            <option>{{ input.selectOption2 }}</option>
            <option>{{ input.selectOption3 }}</option>
          </select>
        </ng-container>
      </ng-container>
      <ng-container *ngIf="input.editing">
        <div class="input-group mt-2 col-xs-5">
          <select
            [(ngModel)]="input.inputType"
            class="form-control"
            [(ngModel)]="input.value"
          >
            <option value="Text">Text</option>
            <option value="Number">Number</option>
            <option value="checkbox">Checkbox</option>
            <option value="Select">Select</option>
          </select>
          <div *ngIf="input.inputType === 'Select'">
            <input
              type="text"
              id="inputSelectOp1"
              [(ngModel)]="input.selectOption1"
              name="selectOption1"
              class="form-control"
              [(ngModel)]="input.value"
            />
            <input
              type="text"
              id="inputSelectOp2"
              [(ngModel)]="input.selectOption2"
              name="selectOption2"
              class="form-control"
              [(ngModel)]="input.value"
            />
            <input
              type="text"
              id="inputSelectOp3"
              [(ngModel)]="input.selectOption3"
              name="selectOption3"
              class="form-control"
              [(ngModel)]="input.value"
            />
          </div>
          <input
            [(ngModel)]="input.labelName"
            [(ngModel)]="input.value"
            class="form-control ml-2"
          />
          <div class="input-group-append">
            <button
              class="btn btn-outline-secondary"
              type="button"
              (click)="onUpdateInput(i)"
            >
              Save
            </button>
          </div>
        </div>
      </ng-container>
      <!-- 
        BUTTON GROUP
       -->
      <div *ngIf="!input.editing">
        <!-- SAVE BUTTON -->
        <div
          *ngIf="input.editing"
          class="float: left; border: 1px solid; width: 227px; height: 50px;"
        >
          <button
            class="btn btn-outline-secondary"
            type="button"
            (click)="onUpdateInput(i)"
          >
            Save
          </button>
        </div>
        <!-- 
          EDIT/DELETE BUTTON GROUP
         -->
        <div class="row">
          <div *ngIf="!input.editing" class="col-xs-1 mr-3">
            <button
              class="btn btn-primary"
              type="button"
              (click)="onEditInput(i)"
            >
              Edit
            </button>
          </div>
          <div class="col-xs-1">
            <button
              type="button"
              class="btn btn-danger m-10"
              (click)="onDeleteInput(i)"
            >
              Delete
            </button>
          </div>
        </div>
        <!-- 
          EDIT/DELETE BUTTON GROUP
         -->
      </div>
    </li>
  </div>
</ul>

<!-- Open XML button -->
<button type="button" class="btn btn-primary" (click)="openXmlModal()">
  Open XML
</button>
<button type="button" class="btn btn-primary" (click)="onUploadXmlFile()">
  Upload XML
</button>

<!-- Modal for XML file -->
<div class="modal" tabindex="-1" role="dialog" id="xml-modal">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">XML File</h5>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <textarea id="xml-textarea" class="form-control"></textarea>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">
          Close
        </button>
      </div>
    </div>
  </div>
</div>

<!-- <div class="mt-3">
  <form (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="labelName">Label Name:</label>
      <input
        type="text"
        id="labelName"
        class="form-control"
        [(ngModel)]="labelName"
      />
    </div>
  </form>
</div> -->
